<UserControl xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"              xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"              xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"              xmlns:d="http://schemas.microsoft.com/expression/blend/2008"              xmlns:local="clr-namespace:Navbot.RealtimeApi.Dotnet.SDK.WPF"              mc:Ignorable="d" d:DesignWidth="450" d:DesignHeight="500"             x:Class="Navbot.RealtimeApi.Dotnet.SDK.WPF.MessageControl" >

    <UserControl.Resources>
        <local:BooleanToHorizontalAlignmentConverter x:Key="BooleanToHorizontalAlignmentConverter" />
        <local:ProportionalWidthConverter x:Key="ProportionalWidthConverter" />
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
    </UserControl.Resources>

    <Grid Margin="10">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>

        <!-- Left-aligned Source Icon -->
        <Image x:Name="LeftImage"
               Grid.Column="0"
               Source="{Binding SourceImage, FallbackValue='pack://application:,,,/Resources/default-user.png'}"
               Width="40" Height="40" Margin="5"
               VerticalAlignment="Top"
               Visibility="{Binding IsLeftAligned, Converter={StaticResource BooleanToVisibilityConverter}}" />

        <!-- Content Text -->
        <Border x:Name="ContentTextBorder"
                Grid.Column="1"
                Background="LightGray"
                CornerRadius="10"
                Padding="10"
                Margin="5"
                MaxWidth="{Binding ActualWidth, RelativeSource={RelativeSource AncestorType=Grid}, Converter={StaticResource ProportionalWidthConverter}, ConverterParameter=0.8}"
                HorizontalAlignment="{Binding IsLeftAligned, Converter={StaticResource BooleanToHorizontalAlignmentConverter}}">
            <TextBlock x:Name="ContentTextBlock"
                       Text="{Binding ContentText, FallbackValue='Lorem ipsum dolor sit amet...'}"
                       TextWrapping="Wrap"
                       FontSize="{Binding FontSize}"
                       FontFamily="{Binding FontFamily}" />
        </Border>

        <!-- Right-aligned Source Icon -->
        <Image x:Name="RightImage"
               Grid.Column="2"
               Source="{Binding SourceImage, FallbackValue='pack://application:,,,/Resources/default-ai.png'}"

               Width="40" Height="40" Margin="5"
               VerticalAlignment="Top"
               Visibility="{Binding IsRightAligned, Converter={StaticResource BooleanToVisibilityConverter}}" />
    </Grid>    
</UserControl>